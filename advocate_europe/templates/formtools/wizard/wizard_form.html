{% extends "base.html" %}
{% load widget_tweaks i18n idea_tags crispy_forms_tags %}

{% block content %}
<div class="wizard-page">
    <form class="wizard custom-form container-narrow" method="post" enctype="multipart/form-data" novalidate>
        <h1>{% trans 'create an idea' %} </h1>

        <div class="wizard-progress-side">
            <ul class="wizard-progress">
                {% if view.is_edit_view %}
                {% for step_form in view.form_classes %}
                <li class="wizard-progress-entry{% if view.form_number == forloop.counter0 %} active{% endif %} filled">
                    <button name="next_form"
                            class="wizard-progress-button"
                            type="submit"
                            value="{{ forloop.counter0 }}">
                        {{ step_form.section_name }}
                    </button>
                </li>
                {% endfor %}
                {% else %}
                {% for step_id, step_form in view.get_form_list.items %}
                <li class="wizard-progress-entry{% if step_id == wizard.steps.current %} active{% endif %}{% if step_id < wizard.steps.current or request.resolver_match.url_name == 'idea-sketch-update' %} filled{% endif %}">
                    {% if step_id < wizard.steps.current or view.is_edit_view %}
                    <button name="wizard_safe_goto_step"
                            class="wizard-progress-button"
                            type="submit"
                            value="{{ step_id }}">
                        {{ step_form.section_name }}
                    </button>
                    {% else %}
                    {{ step_form.section_name }}
                    {% endif %}
                </li>
                {% endfor %}
                {% endif %}
            </ul>
        </div>

        {{ wizard.form.media }}
        {{ wizard.management_form }}

        {% if not view.is_edit_view %}
        {% crispy wizard.form %}
        {% else %}
        {% crispy form %}
        {% endif %}

        <div class="clearfix">
            {% if not view.is_edit_view %}
            {% if wizard.steps.prev %}
            <button class="btn btn-primary"
                    name="wizard_goto_step"
                    type="submit"
                    value="{{ wizard.steps.prev }}">
                {% trans "back" %}
            </button>
            {% endif %}

            {% if wizard.steps.next %}
            <button class="btn btn-primary pull-right"
                    type="submit"
                    name="submit">
                {% trans "continue" %}
            </button>
            {% else %}
            <button class="btn btn-primary pull-right"
                    type="submit"
                    name="submit">
                {% trans "send" %}
            </button>
            {% endif %}
            {% else %}
            <button class="btn btn-primary pull-right"
                    type="submit"
                    name="submit">
                {% trans "send" %}
            </button>
            {% endif %}
        </div>
    </form>
</div>
{% endblock %}
